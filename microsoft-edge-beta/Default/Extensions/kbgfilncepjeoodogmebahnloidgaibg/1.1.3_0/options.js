$(function(){var e=$($(".education-form")[0]).clone(),t=$($(".experience-form")[0]).clone(),n="school",c="degree",o="major",s="edu-startdate",a="edu-enddate",r="company",d="position",u="description",l="exp-startdate",f="exp-enddate",h="exp-current";function m(e){var t=$(e).val(),e=$(e).closest(".experience-form").find("input[name='"+f+"']");"yes"==t&&(e.val(""),e.prop("disabled",!0)),"no"==t&&e.prop("disabled",!1)}function p(e,t){var n=$((t||"input")+"[name='"+e+"']"),c=[],t={};for(i=0;i<n.length;i++)c.push($(n[i]).val());t[e]=c,chrome.storage.sync.set(t,function(){})}function v(i,c){chrome.storage.sync.get(i,function(e){var t=(c||"input")+"[name='"+i+"']",n=e[i];$(t).each(function(e){e<n.length&&$(this).val(n[e]),i==h&&m(this)})})}$("#add_edu").click(function(){$(this).before(e.clone()[0])}),$(document).on("click",".remove-edu-form",function(){$(this).closest(".education-form").remove()}),$("#add_exp").click(function(){$(this).before(t.clone()[0])}),$(document).on("click",".remove-exp-form",function(){$(this).closest(".experience-form").remove()}),$(document).on("change","select[name='"+h+"']",function(){m(this)}),$("input[id], select[id]").each(function(){var t=this.id;chrome.storage.sync.get(t,function(e){e[t]&&$("#"+t).val(e[t])})}),chrome.storage.sync.get(n,function(e){var t=0;if(n in e&&(t=e[n].length),t){for(i=1;i<t;i++)$("#add_edu").click();v(n),v(c,"select"),v(o),v(s),v(a)}}),chrome.storage.sync.get(r,function(e){var t=0;if(r in e&&(t=e[r].length),t){for(i=1;i<t;i++)$("#add_exp").click();v(r),v(d),v(u,"textarea"),v(l),v(f),v(h,"select")}}),$("#saveInfo").click(function(){var e;$("input[id], select[id]").each(function(){var e={};e[this.id]=$(this).val(),chrome.storage.sync.set(e,function(){})}),p(n),p(c,"select"),p(o),p(s),p(a),p(r),p(d),p(u,"textarea"),p(l),p(f),p(h,"select"),e=[],$("input, select, textarea").each(function(){this.id&&!e.includes(this.id)&&e.push(this.id),this.name&&!e.includes(this.name)&&e.push(this.name)}),chrome.storage.sync.set({id_list:e},function(){}),alert("Saved!")})});