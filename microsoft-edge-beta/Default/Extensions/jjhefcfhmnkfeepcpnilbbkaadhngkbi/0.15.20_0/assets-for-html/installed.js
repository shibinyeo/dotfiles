import"./modulepreload-polyfill.js";import{i as f,s as c}from"./storage.js";import{b as g}from"./browser-polyfill.js";function m(e){return(typeof e=="undefined"?f:e)?"https://local.readwise.io:8000".replace(/\/+$/g,""):"https://readwise.io"}var p=e=>e.filter(Boolean).join("/").replace(/:\/{3,}/g,"://").split(/:\/\//g).map(a=>a.replace(/\/{2,}/g,"/")).join("://"),u=(e=g.runtime.id)=>e.startsWith("{")||e==="team@readwise.io",l=()=>{if(u())return!1;const e=navigator.userAgent.toLowerCase();return!e.includes("chrome")&&e.includes("safari")};let d=!1;const v=async()=>{var o;const e=((o=new URL(window.location.href).searchParams.get("isDev"))==null?void 0:o.toString())==="true",a=t=>{document.body.dataset.rwStatus=t||"connecting",d||(!u()&&!l()&&document.body.classList.add("is-chromium"),document.getElementById("log-in-link").href=p([m(e),`/reader/check_if_extension_is_logged_in?a=${l().toString()}`]),d=!0)},r="connectionStatus",i=(await c.get([r]))[r];a(i);let n=i,s=setInterval(async()=>{if(!s)return;const t=(await c.get([r]))[r];n!==t&&(n=t,a(t),t==="connected"&&(clearInterval(s),s=null))},50)};v();
